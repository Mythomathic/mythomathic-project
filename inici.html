<!DOCTYPE html>
  <head>
    
    <meta charset="UTF-8">

    <title>Inici de sessió - Mythomathic</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">  
  <link rel="stylesheet" href="inici.css">
    
  </head>

  <body>

    <div class="gradient-background"></div>

    <header>
    <img src="Title.png" alt="Mythomathic" class="logo">
  </header>

    
<div class="main-content">
    <h1>Mates, mites i màgia.</h1>
    <h2>Inicia sessió</h2>
  <div class="forms-container">
    <form id="login-form">
    <input type="email" id="login-email" placeholder="Correu electrònic" required>
    <input type="password" id="login-password" placeholder="Contrasenya" required>
    <button type="submit">Entrar</button>
  </form>
  </div>
</div>

  <h2>O crea un compte</h2>
  <form id="register-form">
    <input type="email" id="register-email" placeholder="Correu electrònic" required>
    <input type="password" id="register-password" placeholder="Contrasenya" required>
    <button type="submit">Registrar-se</button>
  </form>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-analytics.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword }
        from "https://www.gstatic.com/firebasejs/12.1.0/firebase-auth.js";

  
   const firebaseConfig = {
    apiKey: "AIzaSyDPVUQZXaSAARwROsDgvlohMvB-esYvMrA",
    authDomain: "mythomathic.firebaseapp.com",
    projectId: "mythomathic",
    storageBucket: "mythomathic.firebasestorage.app",
    messagingSenderId: "396574593247",
    appId: "1:396574593247:web:5b7f02c53de5613eda996a",
    measurementId: "G-P649F73C8E"
  };

    // Inicialitzar Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const auth = getAuth(app);

    // Registrar-se
    document.getElementById("register-form").addEventListener("submit", function(e) {
        e.preventDefault();
        const email = document.getElementById("register-email").value;
        const password = document.getElementById("register-password").value;

        createUserWithEmailAndPassword(auth, email, password)
            .then(function(userCredential) {
                console.log("Usuari creat:", userCredential.user);
                alert("Compte creat correctament!"); 
              window.location.href = "perfil.html";
            })
            .catch(function(error) {
                alert("Error: " + error.message);
            });
    });

    // Iniciar sessió
    document.getElementById("login-form").addEventListener("submit", function(e) {
        e.preventDefault();
        const email = document.getElementById("login-email").value;
        const password = document.getElementById("login-password").value;

        signInWithEmailAndPassword(auth, email, password)
            .then(function(userCredential) {
                console.log("Sessió iniciada:", userCredential.user);
                alert("Has iniciat sessió correctament!"); window.location.href = "map.html";
            })
            .catch(function(error) {
                alert("Error: " + error.message);
            });
    });
</script>

</body>
</html>