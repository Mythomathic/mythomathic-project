<!DOCTYPE html>
<html lang="ca">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ekuatia - Mythomathic</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<link rel="stylesheet" href="ekuatia.css">

</head>
<body>
<header>
<button class="back-button" onclick="goTo('map.html')">‚¨Ö Mapa</button>
<div class="title-center">
<img src="E_Title.png" alt="Ekuatia" class="title-img">
</div>
<div class="header-buttons">
<button onclick="openLore()">üìú Lore</button>
<button onclick="toggleMenu()">‚ò∞ Men√∫</button>
</div>
<nav id="menu">
<ul>
<li onclick="goTo('map.html')">Mapa</li>
<li onclick="goTo('perfil.html')">Perfil</li>
<li onclick="goTo('config.html')">Configuraci√≥</li>
<li onclick="goTo('sobremi.html')">Sobre mi</li>
<li onclick="goTo('contacte.html')">Contacte</li>
</ul>
</nav>
</header>

<main class="dimension-container">
<aside class="categories">
<button onclick="showSymbols('equacions')">Equacions</button>
<button onclick="showSymbols('sistemes')">Sistemes</button>
<button onclick="showSymbols('inequacions')">Inequacions</button>
</aside>

<div class="symbols">
<!-- Equacions -->
<img src="icon-eq.png" alt="Equacions" class="symbol" data-cat="equacions"
style="top:180px; left:320px;" onclick="openPopup('Equacions Lineals')">
<img src="icon-eq.png" alt="Equacions" class="symbol" data-cat="equacions"
style="top:300px; left:600px;" onclick="openPopup('Equacions Segon Grau')">
<img src="icon-eq.png" alt="Equacions" class="symbol" data-cat="equacions"
style="top:420px; left:500px;" onclick="openPopup('Equacions Polin√≤miques')">
<img src="icon-eq.png" alt="Equacions" class="symbol" data-cat="equacions"
style="top:540px; left:700px;" onclick="openPopup('Equacions Algebraiques')">
<img src="icon-eq.png" alt="Equacions" class="symbol" data-cat="equacions"
style="top:650px; left:400px;" onclick="openPopup('Equacions Irracionals')">
<img src="icon-eq.png" alt="Equacions" class="symbol" data-cat="equacions"
style="top:600px; left:800px;" onclick="openPopup('Equacions Logaritmiques')">
<img src="icon-eq.png" alt="Equacions" class="symbol" data-cat="equacions"
style="top:720px; left:600px;" onclick="openPopup('Equacions Exponencials')">

<!-- Sistemes -->
<img src="icon-sis.png" alt="Sistemes" class="symbol" data-cat="sistemes"
style="top:220px; left:780px;" onclick="openPopup('Sistemes Lineals')">
<img src="icon-sis.png" alt="Sistemes" class="symbol" data-cat="sistemes"
style="top:420px; left:560px;" onclick="openPopup('Sistemes No Lineals')">
<img src="icon-sis.png" alt="Sistemes" class="symbol" data-cat="sistemes"
style="top:600px; left:960px;" onclick="openPopup('Sistemes 3x3')">

<!-- Inequacions -->
<img src="icon-ineq.png" alt="Inequacions" class="symbol" data-cat="inequacions"
style="top:350px; left:940px;" onclick="openPopup('Inequacions Simples')">
<img src="icon-ineq.png" alt="Inequacions" class="symbol" data-cat="inequacions"
style="top:510px; left:260px;" onclick="openPopup('Inequacions Quadratiques')">
<img src="icon-ineq.png" alt="Inequacions" class="symbol" data-cat="inequacions"
style="top:630px; left:760px;" onclick="openPopup('Sistemes d‚ÄôInequacions')">
</div>
</main>

<div id="lorePopup" class="popup">
<div class="popup-content lore-content">
<span class="close" onclick="closeLore()">&times;</span>
<img src="pergami.png" alt="Pergam√≠" class="scroll-img">
</div>
</div>

<div id="exercisePopup" class="popup">
<div class="popup-content">
<span class="close" onclick="closePopup()">&times;</span>
<h2 id="exerciseTitle"></h2>
<div id="exerciseContent"></div>
<p id="feedback"></p>
</div>
</div>

<script>
function toggleMenu(){document.getElementById('menu').classList.toggle('active');}
function goTo(page){window.location.href=page;}
function openLore(){document.getElementById("lorePopup").style.display="flex";}
function closeLore(){document.getElementById("lorePopup").style.display="none";}
function showSymbols(type){
document.querySelectorAll(".symbol").forEach(el=>el.style.display="none");
document.querySelectorAll(".symbol[data-cat='"+type+"']").forEach(el=>el.style.display="block");
}
document.addEventListener("DOMContentLoaded",()=>{showSymbols("equacions");});
function closePopup(){document.getElementById("exercisePopup").style.display="none";}

// ===== Funcions auxiliars =====
function randomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

// ===== POPUP Exercicis =====
const exercises = {

"Equacions Lineals": () => {
    const a = randomInt(1,5);
    const b = randomInt(-5,5);
    const c = randomInt(1,10);
    const container = document.getElementById("exerciseContent");
    container.innerHTML = `
    <p>Resol l'equaci√≥: ${a}¬∑x + ${b} = ${c}</p>
    <input type="text" id="answer">
    <button onclick="checkLinear(${a},${b},${c})">Comprovar</button>
    <button onclick="exercises['Equacions Lineals']()">Nova activitat</button>`;
},

"Equacions Segon Grau": () => {
    const x1 = randomInt(1,5);
    const x2 = randomInt(6,10);
    const a = 1;
    const b = - (x1 + x2);
    const c = x1 * x2;
    const container = document.getElementById("exerciseContent");
    container.innerHTML = `
    <p>Resol l'equaci√≥: x¬≤ + (${b})¬∑x + (${c}) = 0</p>
    <input type="text" id="answer" placeholder="Respon amb x1,x2">
    <button onclick="checkQuadratic(${x1},${x2})">Comprovar</button>
    <button onclick="exercises['Equacions Segon Grau']()">Nova activitat</button>`;
},

"Equacions Polin√≤miques": () => {
    const a = randomInt(1,3);
    const b = randomInt(1,5);
    const c = randomInt(1,5);
    const container = document.getElementById("exerciseContent");
    container.innerHTML = `
    <p>Resol l'equaci√≥ polin√≤mica: ${a}x¬≥ + ${b}x¬≤ - ${c} = 0</p>
    <input type="text" id="answer">
    <button onclick="checkPolynomial(${a},${b},${c})">Comprovar</button>
    <button onclick="exercises['Equacions Polin√≤miques']()">Nova activitat</button>`;
},

"Equacions Algebraiques": () => {
    const a = randomInt(2,5);
    const b = randomInt(1,5);
    const container = document.getElementById("exerciseContent");
    container.innerHTML = `
    <p>Resol l'equaci√≥: x¬≤ - ${a}/x = ${b}</p>
    <input type="text" id="answer">
    <button onclick="checkAlgebraic(${a},${b})">Comprovar</button>
    <button onclick="exercises['Equacions Algebraiques']()">Nova activitat</button>`;
},

"Equacions Irracionals": () => {
    const r = randomInt(3,10);
    const container = document.getElementById("exerciseContent");
    container.innerHTML = `
    <p>Resol l'equaci√≥: ‚àöx = ${r}</p>
    <input type="text" id="answer">
    <button onclick="checkIrrational(${r})">Comprovar</button>
    <button onclick="exercises['Equacions Irracionals']()">Nova activitat</button>`;
},

"Equacions Logaritmiques": () => {
    const b = 2;
    const r = randomInt(1,10);
    const container = document.getElementById("exerciseContent");
    container.innerHTML = `
    <p>Resol l'equaci√≥ logar√≠tmica: log${b}(x) = ${r}</p>
    <input type="text" id="answer">
    <button onclick="checkLogarithm(${b},${r})">Comprovar</button>
    <button onclick="exercises['Equacions Logaritmiques']()">Nova activitat</button>`;
},

"Equacions Exponencials": () => {
    const b = randomInt(2,5);
    const r = randomInt(2,20);
    const container = document.getElementById("exerciseContent");
    container.innerHTML = `
    <p>Resol l'equaci√≥ exponencial: ${b}<sup>x</sup> = ${r}</p>
    <input type="text" id="answer">
    <button onclick="checkExponential(${b},${r})">Comprovar</button>
    <button onclick="exercises['Equacions Exponencials']()">Nova activitat</button>`;
},

"Sistemes Lineals": () => {
    const x1 = randomInt(1,5);
    const y1 = randomInt(1,5);
    const c1 = x1 + y1;
    const x2 = randomInt(1,5);
    const y2 = randomInt(1,5);
    const c2 = x2 + y2;
    const container = document.getElementById("exerciseContent");
    container.innerHTML = `
    <p>Resol el sistema:</p>
    <p>x + y = ${c1}</p>
    <p>${x2}x + ${y2}y = ${c2}</p>
    <input type="text" id="answer" placeholder="x,y">
    <button onclick="checkSystemLinear(${c1},${x2},${y2},${c2})">Comprovar</button>
    <button onclick="exercises['Sistemes Lineals']()">Nova activitat</button>`;
},

"Sistemes No Lineals": () => {
    const x = randomInt(1,5);
    const y = randomInt(1,5);
    const sum = x + y;
    const prod = x * y;
    const container = document.getElementById("exerciseContent");
    container.innerHTML = `
    <p>Resol el sistema:</p>
    <p>x + y = ${sum}</p>
    <p>xy = ${prod}</p>
    <input type="text" id="answer" placeholder="x,y">
    <button onclick="checkSystemNonLinear(${x},${y})">Comprovar</button>
    <button onclick="exercises['Sistemes No Lineals']()">Nova activitat</button>`;
},

"Sistemes 3x3": () => {
    const x = randomInt(1,3);
    const y = randomInt(1,3);
    const z = randomInt(1,3);
    const c1 = x + y + z;
    const c2 = 2*x - y + 3*z;
    const c3 = x - y + 2*z;
    const container = document.getElementById("exerciseContent");
    container.innerHTML = `
    <p>Resol el sistema 3x3:</p>
    <p>x + y + z = ${c1}</p>
    <p>2x - y + 3z = ${c2}</p>
    <p>x - y + 2z = ${c3}</p>
    <input type="text" id="answer" placeholder="x,y,z">
    <button onclick="checkSystem3x3(${x},${y},${z})">Comprovar</button>
    <button onclick="exercises['Sistemes 3x3']()">Nova activitat</button>`;
},

"Inequacions Simples": () => {
    const a = randomInt(1,5);
    const b = randomInt(1,5);
    const container = document.getElementById("exerciseContent");
    container.innerHTML = `
    <p>Resol la inequaci√≥: ${a}x - ${b} &ge; 0</p>
    <input type="text" id="answer">
    <button onclick="checkInequationSimple(${a},${b})">Comprovar</button>
    <button onclick="exercises['Inequacions Simples']()">Nova activitat</button>`;
},

"Inequacions Quadratiques": () => {
    const x1 = randomInt(1,5);
    const x2 = randomInt(6,10);
    const a = 1;
    const b = - (x1 + x2);
    const c = x1 * x2;
    const container = document.getElementById("exerciseContent");
    container.innerHTML = `
    <p>Resol la inequaci√≥: x¬≤ + (${b})x + (${c}) &le; 0</p>
    <input type="text" id="answer" placeholder="x ‚àà [...]">
    <button onclick="checkInequationQuadratic(${x1},${x2})">Comprovar</button>
    <button onclick="exercises['Inequacions Quadratiques']()">Nova activitat</button>`;
},

"Sistemes d‚ÄôInequacions": () => {
    const a1 = randomInt(1,5);
    const b1 = randomInt(1,5);
    const a2 = randomInt(1,5);
    const b2 = randomInt(1,5);
    const container = document.getElementById("exerciseContent");
    container.innerHTML = `
    <p>Resol el sistema d'inequacions:</p>
    <p>${a1}x + ${b1}y &ge; 0</p>
    <p>${a2}x - ${b2}y &lt; 5</p>
    <input type="text" id="answer" placeholder="x,y">
    <button onclick="checkSystemIneq(${a1},${b1},${a2},${b2})">Comprovar</button>
    <button onclick="exercises['Sistemes d‚ÄôInequacions']()">Nova activitat</button>`;
}
}

function checkLinear(a,b,c){
    const user = Number(document.getElementById("answer").value.trim());
    const correct = (c-b)/a;
    const fb = document.getElementById("feedback");
    if(user===correct){fb.textContent="Correcte! ‚úîÔ∏è"; fb.style.color="green";}
    else{fb.textContent=`Incorrecte ‚ùå (resposta: ${correct})`; fb.style.color="red";}
}

function checkQuadratic(x1,x2){
    const user = document.getElementById("answer").value.trim().split(",").map(Number).sort((a,b)=>a-b);
    const correct = [x1,x2].sort((a,b)=>a-b);
    const fb = document.getElementById("feedback");
    if(user[0]===correct[0] && user[1]===correct[1]){fb.textContent="Correcte! ‚úîÔ∏è"; fb.style.color="green";}
    else{fb.textContent=`Incorrecte ‚ùå (resposta: ${correct.join(",")})`; fb.style.color="red";}
}

function checkPolynomial(a,b,c){
    const fb = document.getElementById("feedback");
    fb.textContent="Revisa el c√†lcul polin√≤mic. ‚ùå";
    fb.style.color="red";
}

function checkAlgebraic(a,b){
    const fb = document.getElementById("feedback");
    fb.textContent="Revisa la resoluci√≥ algebraica. ‚ùå";
    fb.style.color="red";
}

function checkIrrational(r){
    const user = Number(document.getElementById("answer").value.trim());
    const correct = r**2;
    const fb = document.getElementById("feedback");
    if(user===correct){fb.textContent="Correcte! ‚úîÔ∏è"; fb.style.color="green";}
    else{fb.textContent=`Incorrecte ‚ùå (resposta: ${correct})`; fb.style.color="red";}
}

function checkLogarithm(b,r){
    const user = Number(document.getElementById("answer").value.trim());
    const correct = Math.pow(b,r);
    const fb = document.getElementById("feedback");
    if(user===correct){fb.textContent="Correcte! ‚úîÔ∏è"; fb.style.color="green";}
    else{fb.textContent=`Incorrecte ‚ùå (resposta: ${correct})`; fb.style.color="red";}
}

function checkExponential(b,r){
    const user = Number(document.getElementById("answer").value.trim());
    const correct = Math.log(r)/Math.log(b);
    const fb = document.getElementById("feedback");
    if(Math.abs(user-correct)<0.001){fb.textContent="Correcte! ‚úîÔ∏è"; fb.style.color="green";}
    else{fb.textContent=`Incorrecte ‚ùå (resposta: ${correct.toFixed(3)})`; fb.style.color="red";}
}

function checkSystemLinear(c1,x2,y2,c2){
    const user = document.getElementById("answer").value.trim().split(",").map(Number);
    const y = (c2 - x2*c1/(1)) / y2; 
    const x = c1 - y;
    const fb = document.getElementById("feedback");
    if(Math.abs(user[0]-x)<0.001 && Math.abs(user[1]-y)<0.001){fb.textContent="Correcte! ‚úîÔ∏è"; fb.style.color="green";}
    else{fb.textContent=`Incorrecte ‚ùå (resposta: ${x},${y})`; fb.style.color="red";}
}

function checkSystemNonLinear(x,y){
    const user = document.getElementById("answer").value.trim().split(",").map(Number);
    const fb = document.getElementById("feedback");
    if(user[0]===x && user[1]===y){fb.textContent="Correcte! ‚úîÔ∏è"; fb.style.color="green";}
    else{fb.textContent=`Incorrecte ‚ùå (resposta: ${x},${y})`; fb.style.color="red";}
}

function checkSystem3x3(x,y,z){
    const user = document.getElementById("answer").value.trim().split(",").map(Number);
    const fb = document.getElementById("feedback");
    if(user[0]===x && user[1]===y && user[2]===z){fb.textContent="Correcte! ‚úîÔ∏è"; fb.style.color="green";}
    else{fb.textContent=`Incorrecte ‚ùå (resposta: ${x},${y},${z})`; fb.style.color="red";}
}

function checkInequationSimple(a,b){
    const correct = `x >= ${b/a}`;
    const user = document.getElementById("answer").value.trim();
    const fb = document.getElementById("feedback");
    if(user===correct){fb.textContent="Correcte! ‚úîÔ∏è"; fb.style.color="green";}
    else{fb.textContent=`Incorrecte ‚ùå (resposta: ${correct})`; fb.style.color="red";}
}

function checkInequationQuadratic(x1,x2){
    const correct = `[${x1}, ${x2}]`;
    const user = document.getElementById("answer").value.trim();
    const fb = document.getElementById("feedback");
    if(user===correct){fb.textContent="Correcte! ‚úîÔ∏è"; fb.style.color="green";}
    else{fb.textContent=`Incorrecte ‚ùå (resposta: ${correct})`; fb.style.color="red";}
}

function checkSystemIneq(a1,b1,a2,b2){
    const fb = document.getElementById("feedback");
    fb.textContent="Resol el sistema gr√†ficament. ‚ùå";
    fb.style.color="red";
}

// ===== Obrir popup =====
function openPopup(title){
    document.getElementById("exerciseTitle").textContent=title;
    document.getElementById("exercisePopup").style.display="flex";
    document.getElementById("exerciseContent").innerHTML="";
    document.getElementById("feedback").textContent="";
    if(exercises[title]) exercises[title]();
    else document.getElementById("exerciseContent").innerHTML="<p>Encara no hi ha exercicis disponibles.</p>";
}

</script>
</body>
</html>
